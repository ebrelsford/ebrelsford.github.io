<html>
    <head>
        <title>In-class Excercise | Advanced Interactive Web Mapping, Programming, and Design</title>
        <link href="../style.css" rel="stylesheet" />
    </head>
    <body>
        <main>
            <header>
                <a href="..">Advanced Interactive Web Mapping, Programming, and Design</a>
                <h1>In-class Excercises: Templates, Turf</h1>
            </header>

            <section>
                <h2>Part 1: Using Mustache</h2>
                <ol>
                    <li>Start with this <a href="http://jsbin.com/jakoqe/1/edit?js,output">example jsbin</a>.</li>
                    <li>Change the <code>context</code> object to change the name and job.</li>
                </ol>
            </section>

            <section>
                <h2>Part 2: Mustache templates in HTML</h2>
                <ol>
                    <li>Use this <a href="http://jsbin.com/kuhane/1/edit?html,js,output">jsbin</a> as an example. Look at how it stores the template in HTML.</li>
                    <li>Using the code from Part 1, move the template from JavaScript to HTML:
                        <ol>
                            <li>Add a <code>script</code> element in your HTML.</li>
                            <li>Move the template from the JavaScript into the new <code>script</code> element.</li>
                            <li>Get the template from the HTML in your JavaScript by calling <code>$('#template').html()</code>. The selector will be different depending on your <code>script</code> element's id.</li>
                        </ol>
                    </li>
                </ol>
            </section>

            <section>
                <h2>Part 3: Mustache template loops</h2>
                <ol>
                    <li>Start with this <a href="http://jsbin.com/sesapa/1/edit?html,js,output">example jsbin</a>.</li>
                    <li>Change the SQL to select rows from one of your tables.</li>
                    <li>Change the template to show data from the rows in your tables.</li>
                </ol>
            </section>

            <section>
                <h2>Part 4: Mustache templates in Leaflet popups</h2>
                <ol>
                    <li>Start with this <a href="http://jsbin.com/kopoko/edit?js,output">example jsbin</a>.</li>
                    <li>We want each popup to include a link to the Airbnb listing. These URLs look like this:
                        <pre><code>https://www.airbnb.com/rooms/<strong>id</strong></code></pre>
                        for example: <a href="https://www.airbnb.com/rooms/10790927">https://www.airbnb.com/rooms/10790927</a>. The <strong>id</strong> is the <code>id</code> field in the data from CartoDB.
                    </li>
                    <li>Change the popups' templates to include a link to the Airbnb listing associated with the point on the map.</li>
                </ol>
            </section>

            <section>
                <h2>Part 5: Turf, buffer</h2>
                    <p>Starting with <a href="http://jsbin.com/suwose/edit?js,output">this jsbin</a>, add a <a href="http://turfjs.org/static/docs/module-turf_buffer.html">buffer</a> to each feature in a GeoJSON file loaded from GitHub.</p>
                    <p><a href="http://jsbin.com/buvoni/3/edit?js,output">This jsbin</a> contains a working example if you get stuck.</p>
            </section>

            <section>
                <h2>Part 6: Turf, convex hull</h2>
                <p>Use Turf to add the convex hull of a polygon to a map, starting with <a href="http://jsbin.com/wimeqi/edit?js,output">this jsbin</a>.</p>
                <p><a href="http://jsbin.com/leyuge/5/edit?js,output">This jsbin</a> contains a working example if you get stuck.</p>
            </section>

            <section>
                <h2>Part 7: Turf, aggregation</h2>
                <p>Make a choropleth map by counting the number of points in each polygon and classifying the polygons.</p>
                <ol>
                    <li>Start with <a href="http://jsbin.com/nicobu/latest/edit?js,output">this jsbin</a>, which loads city council districts and vacant lots in Queens.</li>
                    <li>Use <a href="http://turfjs.org/static/docs/module-turf_count.html"><code>turf.count</code></a> to get the city council districts including the number of vacant lots in each one.</li>
                    <li>Set <code>classes</code> to the result of classifying the city council districts by the number of vacant lots in each, for example by using <a href="http://turfjs.org/static/docs/module-turf_jenks.html"><code>turf.jenks</code></a>. Use 4 classes.</li>
                    <li>Add the resulting GeoJSON object to <code>turfLayer</code>.</li>
                    <li>This <a href="http://jsbin.com/cayuqi/2/edit">jsbin</a> is a working example.</li>
                </ol>
            </section>

            <section>
                <h2>Part 8: Turf, dynamic</h2>
                <p>Make a map that uses Turf in response to user input.</p>
                <ol>
                    <li>Start with <a href="http://jsbin.com/yanawa/latest/edit?js,output">this jsbin</a>.</li>
                    <li>Where the file indicates that you should, use <a href="http://leafletjs.com/reference.html#layergroup-clearlayers"><code>clearLayers()</code></a> to get rid of any existing layers on <code>turfLayer</code>.</li>
                    <li>As indicated, use <a href="http://leafletjs.com/reference.html#layergroup-getlayers"><code>getLayers()</code></a> to write an <code>if</code> statement that checks that the number of layers on <code>turfLayer</code> is at least 3.</li>
                    <li>Within the <code>if</code> statement from 3, find the convex hull of the <code>clickedPoints</code> and add that to <code>turfLayer</code>.</li>
                    <li>This <a href="http://jsbin.com/tiquyu/2/edit">jsbin</a> is a working example.</li>
                </ol>
            </section>

            <footer>
                <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Advanced Interactive Web Mapping, Programming, and Design</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://ebrelsford.github.io/" property="cc:attributionName" rel="cc:attributionURL">Eric Brelsford</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
            </footer>
        </main>
    </body>
</html>
